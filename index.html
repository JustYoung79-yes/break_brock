<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="screen-orientation" content="landscape">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ®</text></svg>">
    <title>ë²½ëŒê¹¨ê¸° ê²Œì„</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Noto+Sans+KR:wght@400;700&display=swap');

        :root {
            --game-purple: 138, 43, 226;
            --game-accent: #b8b8ff;
            --game-light: #e0e0ff;
            --game-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            font-family: 'Noto Sans KR', sans-serif;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .game-container {
            position: relative;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            box-shadow: 0 0 60px rgba(var(--game-purple), 0.3), inset 0 0 60px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(var(--game-purple), 0.5);
            overflow-x: hidden;
            overflow-y: auto;
            max-height: 100vh;
        }
        
        h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--game-light);
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.8rem;
            text-shadow: 0 0 20px rgba(var(--game-purple), 0.8);
        }
        
        .info-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--game-accent);
            font-size: 0.95rem;
        }
        
        .info-bar span {
            font-weight: 700;
        }
        
        .lives-bar-wrap {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .lives-bar-wrap .label { font-weight: 700; }
        .lives-bar {
            width: 72px;
            height: 12px;
            background: rgba(0,0,0,0.5);
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid rgba(var(--game-purple), 0.4);
        }
        .lives-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #16a34a);
            border-radius: 5px;
            transition: width 0.25s ease;
        }
        .game-sidebar .lives-bar { width: 52px; height: 10px; }
        
        canvas {
            display: block;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 8px;
            cursor: none;
            touch-action: none;
        }
        body.creator-mode canvas { cursor: default; }
        
        .controls {
            margin-top: 15px;
            text-align: center;
            color: #888;
            font-size: 0.85rem;
        }
        
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.85);
            border-radius: 16px;
            color: white;
            z-index: 10;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .overlay.hidden {
            display: none;
        }
        .creator-panel { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .creator-panel.hidden { display: none; }
        .creator-panel .btn.selected { background: #8b5cf6; border-color: #8b5cf6; }
        
        .overlay h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(var(--game-purple), 0.8);
        }
        
        .overlay p {
            margin-bottom: 25px;
            font-size: 1.1rem;
            color: var(--game-accent);
        }
        
        #loginOverlay {
            background: rgba(255, 255, 255, 0.95);
        }
        .login-options-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 1;
        }
        .login-guest-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 1;
        }
        #loginOverlay, #loginOverlay h2, #loginOverlay p {
            color: #000;
        }
        #loginOverlay .account-input {
            color: #000;
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.3);
        }
        #loginOverlay .account-input::placeholder {
            color: rgba(0,0,0,0.5);
        }
        #loginOverlay .btn-outline {
            color: #000;
            border-color: rgba(0, 0, 0, 0.5);
        }
        #loginOverlay .btn-outline:hover {
            background: rgba(0, 0, 0, 0.1);
        }
        #loginOverlay .btn-toggle-pw {
            color: #000;
        }
        
        .profile-draw-section {
            margin: 12px 0;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        .profile-draw-section p {
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .profile-canvas-wrap {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        .profile-canvas-wrap canvas {
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 8px;
            cursor: crosshair;
            background: #fff;
            image-rendering: pixelated;
        }
        .profile-color-btn {
            width: 24px;
            height: 24px;
            border: 2px solid #fff;
            border-radius: 4px;
            cursor: pointer;
        }
        .profile-color-btn.active {
            border-color: #48dbfb;
            box-shadow: 0 0 8px rgba(72,219,251,0.8);
        }
        .ranking-table .profile-img {
            width: 28px;
            height: 28px;
            vertical-align: middle;
            border-radius: 4px;
            margin-right: 6px;
        }
        
        .btn {
            padding: 14px 35px;
            font-size: 1.1rem;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: var(--game-gradient);
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-small {
            padding: 8px 20px;
            font-size: 0.9rem;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid rgba(102, 126, 234, 0.6);
            color: var(--game-accent);
        }
        
        .btn-outline:hover {
            background: rgba(102, 126, 234, 0.2);
        }
        
        .account-input {
            padding: 12px 20px;
            font-size: 1rem;
            border-radius: 8px;
            border: 2px solid rgba(var(--game-purple), 0.5);
            background: rgba(102, 126, 234, 0.2);
            color: white;
            width: 200px;
            text-align: center;
        }
        
        .account-input::placeholder {
            color: rgba(184, 184, 255, 0.5);
        }
        
        .input-with-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
            justify-content: center;
        }
        
        .input-with-toggle .account-input {
            margin: 0;
        }
        
        .login-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 10px 0;
        }
        .login-row label {
            min-width: 70px;
            color: #b8b8ff;
            font-size: 1rem;
        }
        
        .btn-toggle-pw {
            padding: 10px 14px;
            font-size: 1rem;
            background: rgba(102, 126, 234, 0.3);
            border: 1px solid rgba(138, 43, 226, 0.5);
            border-radius: 8px;
            color: #b8b8ff;
            cursor: pointer;
        }
        
        .btn-toggle-pw:hover {
            background: rgba(102, 126, 234, 0.5);
        }
        
        .password-match-msg {
            font-size: 0.9rem;
            margin-top: 4px;
        }
        
        .password-match-msg.error {
            color: #ff6b6b;
        }
        
        .password-match-msg.ok {
            color: #48dbfb;
        }
        
        .options-panel {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 16px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 9999;
            overflow-y: auto;
        }
        
        .options-panel.hidden {
            display: none;
        }
        .options-panel .options-footer {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-top: 20px;
        }
        #storageAdminBtn {
            position: absolute;
            right: 0;
            bottom: 0;
            width: 24px;
            height: 24px;
            padding: 0;
            min-width: 0;
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0;
        }
        #storageAdminBtn:hover {
            background: #222;
        }
        
        .options-panel h2 {
            margin-bottom: 25px;
            font-family: 'Orbitron', sans-serif;
        }
        
        .option-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 400px;
            margin-bottom: 18px;
            color: var(--game-accent);
        }
        
        .option-row label {
            flex: 1;
        }
        
        .option-row select,
        .option-row input[type="range"] {
            flex: 1;
            max-width: 200px;
            margin-left: 15px;
            padding: 6px 10px;
            border-radius: 6px;
            background: rgba(102, 126, 234, 0.3);
            border: 1px solid rgba(var(--game-purple), 0.5);
            color: white;
        }
        
        .option-row input[type="range"] {
            padding: 0;
        }
        
        .option-value {
            min-width: 40px;
            text-align: right;
        }
        
        .shop-section {
            width: 100%;
            max-width: 400px;
            margin: 20px 0 10px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.15);
            border-radius: 12px;
            border: 1px solid rgba(var(--game-purple), 0.4);
        }
        .shop-section h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            color: var(--game-light);
            margin-bottom: 12px;
        }
        .equipment-shop h3, .equipment-shop p, .equipment-shop #equipmentShopGrid, .equipment-shop #equipmentShopGrid * { color: #fff !important; }
        .shop-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .shop-skin-btn {
            width: 56px;
            height: 56px;
            border: 2px solid rgba(var(--game-purple), 0.5);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        .shop-skin-btn:hover {
            border-color: var(--game-accent);
            transform: scale(1.05);
        }
        .shop-skin-btn.selected {
            border-color: #48dbfb;
            box-shadow: 0 0 12px rgba(72, 219, 251, 0.6);
        }
        
        .header-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            position: relative;
            z-index: 15;
        }
        #bulletFireBtn {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 16;
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, #00aa55 0%, #008844 100%);
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 8px;
            cursor: pointer;
            display: none;
            box-shadow: 0 2px 10px rgba(0,170,85,0.5);
        }
        #bulletFireBtn:active {
            transform: scale(0.95);
        }
        .header-btns { display: flex; gap: 8px; align-items: center; }
        
        .header-buttons h1 {
            flex: 1;
            margin: 0;
        }
        
        .overlay-buttons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .ranking-box {
            background: rgba(0,0,0,0.5);
            border-radius: 8px;
            padding: 15px 25px;
            margin: 15px 0;
            min-width: 200px;
            text-align: left;
            max-height: 320px;
            overflow-y: auto;
        }
        
        .ranking-box h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--game-accent);
        }
        
        .ranking-box ol {
            padding-left: 20px;
            color: var(--game-light);
        }
        
        .ranking-box li {
            margin: 5px 0;
        }
        
        .ranking-box .ranking-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
            color: var(--game-light);
        }
        .ranking-box .ranking-table th,
        .ranking-box .ranking-table td {
            padding: 6px 10px;
            text-align: left;
            border-bottom: 1px solid rgba(184, 184, 255, 0.3);
        }
        .ranking-box .ranking-table th {
            color: var(--game-accent);
            font-weight: 700;
        }
        .ranking-box .ranking-table tr:hover {
            background: rgba(102, 126, 234, 0.2);
        }
        
        .first-place {
            font-size: 1.5rem;
            color: #ffd700;
            margin: 15px 0;
            animation: pulse 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        
        #reviveOverlay.revive-white { background: #fff !important; }
        #reviveOverlay.revive-white #reviveOverlayText { color: #fff; opacity: 0; }
        
        #stage6WhiteFadeOverlay { background: rgba(0,0,0,0); transition: background 2s ease; }
        #stage6WhiteFadeOverlay.stage6-white { background: #fff !important; }
        
        /* íšŒì „ ì•ˆë‚´ ì˜¤ë²„ë ˆì´: ì „ì²´ ë·°í¬íŠ¸ ê³ ì • (ì„¸ë¡œ ëª¨ë“œì—ì„œ ì˜ë¦¼ ë°©ì§€) */
        #rotateOverlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            width: 100% !important;
            height: 100% !important;
            height: 100dvh !important;
            min-height: 100dvh;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
        }
        @media (orientation: portrait) {
            #rotateOverlay h2 { font-size: 1.2rem; margin-bottom: 12px; }
            #rotateOverlay p { font-size: 0.9rem; margin-bottom: 10px; }
            #rotateOverlay p:last-of-type { font-size: 2rem; margin: 12px 0; }
        }
        /* ëª¨ë°”ì¼ ê°€ë¡œ ëª¨ë“œ: ê²Œì„ì°½ ì„¸ë¡œ ê½‰, UI ì˜¤ë¥¸ìª½ íŒ¨ë„ */
        @media (orientation: landscape) and (max-width: 900px) {
            body { padding: 4px; overflow: hidden; }
            .game-container {
                display: flex;
                flex-direction: row;
                align-items: stretch;
                padding: 8px;
                max-width: 100vw;
                max-height: 100vh;
                gap: 8px;
            }
            .game-main { flex: 1; min-width: 0; min-height: 0; display: flex; flex-direction: column; justify-content: stretch; align-items: stretch; }
            .game-sidebar {
                display: flex;
                flex-direction: column;
                justify-content: center;
                gap: 8px;
                min-width: 100px;
                max-width: 140px;
                padding: 8px 0;
            }
            .game-sidebar .header-buttons { flex-direction: column; margin-bottom: 0; }
            .game-sidebar .header-buttons h1 { font-size: 0.9rem; margin-bottom: 4px; }
            .game-sidebar .info-bar { flex-direction: column; align-items: flex-start; font-size: 0.75rem; margin-bottom: 0; }
            .game-sidebar .controls { font-size: 0.6rem; margin-top: 0; text-align: left; line-height: 1.3; }
            .game-sidebar .header-btns { flex-direction: column; }
            .game-main canvas { flex: 1; min-height: 0; width: 100% !important; height: 100% !important; max-height: 100%; touch-action: none; }
        }
        /* ëª¨ë°”ì¼ ì„¸ë¡œ/ì§§ì€ í™”ë©´ */
        @media (max-height: 500px) {
            body { padding: 8px; overflow-y: auto; overflow-x: hidden; }
            .game-container { padding: 10px; max-width: 100%; }
            h1 { font-size: 1.2rem; margin-bottom: 6px; }
            .info-bar { font-size: 0.8rem; margin-bottom: 6px; }
            .controls { font-size: 0.7rem; margin-top: 6px; }
            canvas { max-width: 100%; max-height: 70vh; touch-action: none; }
        }
        @media (orientation: portrait) or (min-width: 901px) {
            .game-sidebar { display: none !important; }
        }
        @media (orientation: landscape) and (max-width: 900px) {
            .game-main .header-buttons, .game-main .info-bar, .game-main .controls { display: none !important; }
        }
        @media (orientation: landscape) and (max-width: 900px) {
            #rotateOverlay { display: none !important; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-main" style="position:relative;">
            <button type="button" id="bulletFireBtn" style="display:none;">ğŸ”« ë°œì‚¬</button>
            <div class="header-buttons header-top">
                <h1>ğŸ® ë²½ëŒê¹¨ê¸°</h1>
                <div class="header-btns">
                    <button class="btn btn-small" id="exitBtn" title="ì¢…ë£Œ" style="display:none;">âœ•</button>
                    <button class="btn btn-small" id="fullscreenBtn" title="ì „ì²´í™”ë©´" style="display:none;">â›¶</button>
                    <button class="btn btn-small" id="optionsBtn">ì˜µì…˜</button>
                </div>
            </div>
            <div class="info-bar info-top">
                <span>ìŠ¤í…Œì´ì§€: <span id="stage" class="stageVal">1</span></span>
                <span>ì ìˆ˜: <span id="score" class="scoreVal">0</span></span>
                <span class="lives-bar-wrap"><span class="label">ìƒëª…</span><div class="lives-bar"><div class="lives-bar-fill livesVal" id="livesFill" style="width:100%"></div></div></span>
                <span>ğŸª™ <span id="coins" class="coinVal">0</span></span>
            </div>
            <canvas id="gameCanvas" width="800" height="600"></canvas>
            <p class="controls controls-bottom">ë§ˆìš°ìŠ¤/ë°©í–¥í‚¤ë¡œ íŒ¨ë“¤ ì´ë™ Â· ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ê³µ ì¶œë°œ Â· ]: ì˜µì…˜</p>
        </div>
        <div class="game-sidebar">
            <div class="header-buttons">
                <h1>ğŸ® ë²½ëŒê¹¨ê¸°</h1>
                <div class="header-btns">
                    <button class="btn btn-small" id="exitBtnSide" title="ì¢…ë£Œ" style="display:none;">âœ•</button>
                    <button class="btn btn-small" id="fullscreenBtnSide" title="ì „ì²´í™”ë©´" style="display:none;">â›¶</button>
                    <button class="btn btn-small" id="optionsBtnSide" title="ì˜µì…˜">ì˜µì…˜</button>
                </div>
            </div>
            <div class="info-bar">
                <span>ìŠ¤í…Œì´ì§€: <span class="stageVal">1</span></span>
                <span>ì ìˆ˜: <span class="scoreVal">0</span></span>
                <span class="lives-bar-wrap"><span class="label">ìƒëª…</span><div class="lives-bar"><div class="lives-bar-fill livesVal" style="width:100%"></div></div></span>
                <span>ğŸª™ <span class="coinVal">0</span></span>
            </div>
            <p class="controls">ë§ˆìš°ìŠ¤/ë°©í–¥í‚¤ë¡œ íŒ¨ë“¤ ì´ë™ Â· ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ê³µ ì¶œë°œ Â· ]: ì˜µì…˜</p>
        </div>
        
        <div id="rotateOverlay" class="overlay" style="z-index:100; background: rgba(0,0,0,0.95); display:none;">
            <h2>ğŸ“± ê°€ë¡œ ëª¨ë“œë¡œ ì „í™˜í•´ ì£¼ì„¸ìš”</h2>
            <p>ì´ ê²Œì„ì€ ê°€ë¡œ ëª¨ë“œì—ì„œë§Œ í”Œë ˆì´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size:3rem; margin:20px 0;">ğŸ“²</p>
            <p style="font-size:0.85rem; color:#888; margin-top:10px;">ê°€ë¡œ ëª¨ë“œ í›„ â›¶ ë²„íŠ¼ìœ¼ë¡œ ì „ì²´í™”ë©´ì„ ì‚¬ìš©í•˜ì„¸ìš”</p>
        </div>
        
        <div id="loginOverlay" class="overlay">
            <button type="button" class="btn btn-small login-guest-btn" id="guestPlayBtn" onclick="typeof doGuestLogin==='function'&&doGuestLogin()">ê²ŒìŠ¤íŠ¸ë¡œ í”Œë ˆì´</button>
            <button type="button" class="btn btn-small login-options-btn" id="optionsBtnLogin" title="ì˜µì…˜">ì˜µì…˜</button>
            <h2>ğŸ® ë²½ëŒê¹¨ê¸°</h2>
            <p id="loginConnectionStatus" class="login-status error" style="display:none; font-size:0.9rem; color:#ff6b6b; margin:8px 0; max-width:280px;"></p>
            <p>ê³„ì • ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
            <div class="login-row">
                <label for="accountSelect">ì•„ì´ë””</label>
                <input type="text" id="accountSelect" class="account-input" placeholder="ê³„ì • ì•„ì´ë”” ì…ë ¥" maxlength="20" autocomplete="off" style="width:220px;">
            </div>
            <div class="login-row">
                <label for="passwordInput">ë¹„ë°€ë²ˆí˜¸</label>
                <div class="input-with-toggle" style="margin:0;">
                    <input type="password" id="passwordInput" placeholder="ë¹„ë°€ë²ˆí˜¸" maxlength="30" class="account-input">
                    <button type="button" class="btn-toggle-pw" id="toggleLoginPassword" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
                </div>
            </div>
            <div class="overlay-buttons" style="margin-top:15px;">
                <button type="button" class="btn" id="loginBtn" onclick="typeof doLogin==='function'&&doLogin()">ë¡œê·¸ì¸</button>
                <button type="button" class="btn btn-small btn-outline" id="editProfileFromLoginBtn" onclick="typeof showEditProfileFromLogin==='function'&&showEditProfileFromLogin()">í”„ë¡œí•„ ìˆ˜ì •</button>
                <button type="button" class="btn btn-small btn-outline" id="createAccountBtn" onclick="typeof showCreateAccountModal==='function'&&showCreateAccountModal()">ê³„ì • ìƒˆë¡œ ë§Œë“¤ê¸°</button>
                <button type="button" class="btn btn-small btn-outline" id="deleteAccountBtn" onclick="handleDeleteAccount()">ê³„ì • ì‚­ì œ</button>
                <button type="button" class="btn btn-small btn-outline" id="findPasswordBtn" onclick="typeof showFindPasswordModal==='function'&&showFindPasswordModal()">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</button>
            </div>
        </div>
        
        <div id="startOverlay" class="overlay hidden">
            <h2>ë²½ëŒê¹¨ê¸°</h2>
            <p>ëª¨ë“  ë²½ëŒì„ ê¹¨ë©´ ìŠ¹ë¦¬! <span id="currentAccountDisplay"></span></p>
            <div class="overlay-buttons" style="margin-bottom:15px;">
                <button class="btn" id="startBtn">ê²Œì„ ì‹œì‘</button>
                <button class="btn btn-outline" id="coopModeBtn">í˜‘ë™ ëª¨ë“œ</button>
                <button class="btn btn-small btn-outline" id="editAccountBtn">ê³„ì • ì •ë³´ ìˆ˜ì •</button>
            </div>
        </div>

        <div id="coopOverlay" class="overlay hidden" style="z-index: 15;">
            <h2>ğŸ¤ í˜‘ë™ ëª¨ë“œ</h2>
            <p style="max-width:360px; line-height:1.6;">í•œ ê¸°ê¸°ì—ì„œ ë‘ ëª…ì´ í”Œë ˆì´í•©ë‹ˆë‹¤. <strong>ê°™ì´í•  ìƒëŒ€ë¥¼ ë¨¼ì € ì°¾ì•„ì£¼ì„¸ìš”.</strong></p>
            <div style="text-align:left; max-width:360px; margin:15px 0; padding:12px; background:rgba(102,126,234,0.2); border-radius:8px; color:#b8b8ff; line-height:1.7;">
                <p>â€¢ <strong>1P</strong>: ë°©í–¥í‚¤(â† â†’) ë˜ëŠ” ë§ˆìš°ìŠ¤ë¡œ <strong>ì•„ë˜ íŒ</strong> ì¡°ì¢…</p>
                <p>â€¢ <strong>2P</strong>: <strong>A / D</strong> í‚¤ë¡œ <strong>ìœ„ìª½ íŒ</strong> ì¡°ì¢…</p>
                <p>â€¢ ê³µì´ ìœ„Â·ì•„ë˜ íŒì— ë§ìœ¼ë©´ íŠ•ê²¨ ë‚˜ê°‘ë‹ˆë‹¤. ë²½ëŒì„ í•¨ê»˜ ê¹¨ì„¸ìš”!</p>
            </div>
            <div class="overlay-buttons">
                <button class="btn" id="coopStartBtn">ì‹œì‘</button>
                <button class="btn btn-outline" id="coopBackBtn">ë’¤ë¡œ</button>
            </div>
        </div>
        
        <div id="gameOverOverlay" class="overlay hidden" style="z-index: 20;">
            <h2>Game Over</h2>
            <p style="font-size:0.9rem; color:#b8b8ff; margin-top:-10px; margin-bottom:15px;">ê²Œì„ì˜¤ë²„</p>
            <p id="gameOver100DeathText" style="display:none; font-size:1.1rem; color:#ffb8b8; margin-bottom:10px;"></p>
            <p>ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span></p>
            <div id="gameOverFirstPlace" class="first-place hidden"></div>
            <div id="rankingDisplay" class="ranking-box"></div>
            <div class="overlay-buttons">
                <button class="btn" id="continueBtn">ì´ì–´ì„œ í•˜ê¸°</button>
                <button class="btn" id="newGameBtn">ìƒˆë¡œ ì‹œì‘</button>
            </div>
        </div>
        
        <div id="winOverlay" class="overlay hidden">
            <h2>ğŸ‰ ìŠ¹ë¦¬!</h2>
            <p>ì¶•í•˜í•©ë‹ˆë‹¤! ì „íˆ¬ì—ì„œ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤</p>
            <p>ìµœì¢… ì ìˆ˜: <span id="winScore">0</span></p>
            <div id="winRankingDisplay" class="ranking-box"></div>
            <div id="firstPlaceCelebration" class="first-place hidden"></div>
            <div class="overlay-buttons" style="flex-wrap:wrap; gap:8px;">
                <button class="btn" id="playAgainBtn">ë‹¤ì‹œ í•˜ê¸°</button>
                <button type="button" class="btn btn-small btn-outline" id="resetMyRankingBtnWin">ë‚´ ì ìˆ˜ ì´ˆê¸°í™”</button>
                <button type="button" class="btn btn-small btn-outline" id="resetAllRankingBtnWin">ì „ì²´ ì ìˆ˜ ì´ˆê¸°í™”</button>
            </div>
        </div>
        
        <div id="tutorialOverlay" class="overlay hidden" style="z-index:15;">
            <h2>ğŸ“– íŠœí† ë¦¬ì–¼</h2>
            <div style="text-align:left; max-width:360px; margin:15px 0; line-height:1.6; color:#b8b8ff;">
                <p>â€¢ <strong>ë§ˆìš°ìŠ¤</strong> ë˜ëŠ” <strong>ë°©í–¥í‚¤</strong>ë¡œ íŒ¨ë“¤ì„ ì¢Œìš°ë¡œ ì›€ì§ì´ì„¸ìš”</p>
                <p>â€¢ <strong>ìŠ¤í˜ì´ìŠ¤ë°”</strong>ë¥¼ ëˆ„ë¥´ë©´ ê³µì´ ë°œì‚¬ë©ë‹ˆë‹¤</p>
                <p>â€¢ ê³µì´ íŒ¨ë“¤ì— ë‹¿ì§€ ì•Šê³  ë°”ë‹¥ìœ¼ë¡œ ë–¨ì–´ì§€ë©´ ìƒëª…ì´ ì¤„ì–´ë“­ë‹ˆë‹¤</p>
                <p>â€¢ ëª¨ë“  ë²½ëŒì„ ê¹¨ë©´ ìŠ¤í…Œì´ì§€ í´ë¦¬ì–´!</p>
                <p>â€¢ ì•„ì´í…œì„ ë¨¹ì–´ ë‹¤ì–‘í•œ íš¨ê³¼ë¥¼ ì–»ì–´ë³´ì„¸ìš”</p>
            </div>
            <button class="btn" id="tutorialStartBtn">ì‹œì‘í•˜ê¸°</button>
        </div>
        
        <div id="creatorTutorialOverlay" class="overlay hidden" style="z-index:20;">
            <h2>ğŸ”§ ë§Œë“¤ê¸° ëª¨ë“œ</h2>
            <div style="text-align:left; max-width:320px; margin:15px 0; line-height:1.6; color:#b8b8ff;">
                <p>â€¢ <strong>í´ë¦­</strong>: ë¹ˆ ê³µê°„ì— ë²½ëŒ ì„¤ì¹˜</p>
                <p>â€¢ <strong>ë“œë˜ê·¸</strong>: ë²½ëŒ ì´ë™</p>
                <p>â€¢ <strong>ìš°í´ë¦­</strong> ë˜ëŠ” <strong>ì‚­ì œ ë²„íŠ¼</strong> í›„ í´ë¦­: ë²½ëŒ ì œê±°</p>
                <p>â€¢ <strong>ê²Œì„ ì‹œì‘</strong>ìœ¼ë¡œ ë§Œë“  ë§µì„ í”Œë ˆì´í•˜ì„¸ìš”</p>
            </div>
            <button class="btn" id="creatorTutorialOkBtn">í™•ì¸</button>
        </div>
        <div id="creatorOverlay" class="creator-panel hidden" style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); z-index:15; background:rgba(0,0,0,0.9); padding:12px 20px; border-radius:12px;">
            <span style="font-weight:bold;">ğŸ”§ ë§Œë“¤ê¸° ëª¨ë“œ</span>
            <span style="font-size:0.85rem; color:#b8b8ff;">í´ë¦­: ì„¤ì¹˜ Â· ë“œë˜ê·¸: ì´ë™ Â· ì‚­ì œ ë²„íŠ¼/ìš°í´ë¦­: ì œê±°</span>
            <div class="overlay-buttons" style="margin:0; gap:8px; flex-wrap:wrap;">
                <button class="btn btn-small" id="creatorDeleteBtn">ğŸ—‘ï¸ ì‚­ì œ</button>
                <button class="btn btn-small" id="creatorSaveLevelBtn">ğŸ’¾ ë ˆë²¨ ì €ì¥</button>
                <button class="btn btn-small" id="creatorLoadOthersBtn">ğŸŒ ë‹¤ë¥¸ ìœ ì € ë ˆë²¨</button>
                <button class="btn btn-small" id="creatorStartBtn">ê²Œì„ ì‹œì‘</button>
                <button class="btn btn-small btn-outline" id="creatorExitBtn">ì¢…ë£Œ</button>
            </div>
        </div>

        <div id="customLevelsModal" class="overlay hidden" style="z-index:21;">
            <h2>ğŸŒ ë‹¤ë¥¸ ìœ ì €ê°€ ë§Œë“  ë ˆë²¨</h2>
            <p style="font-size:0.9rem; color:#b8b8ff;">í”Œë ˆì´í•  ë ˆë²¨ì„ ì„ íƒí•˜ì„¸ìš”</p>
            <div id="customLevelsList" style="max-height:300px; overflow-y:auto; margin:15px 0; text-align:left;"></div>
            <button class="btn btn-small btn-outline" id="customLevelsModalClose">ë‹«ê¸°</button>
        </div>
        
        <div id="mercyAttackOverlay" class="overlay hidden" style="z-index:23;">
            <h2>ë³´ìŠ¤ ì²´ë ¥ì´ 1 ë‚¨ì•˜ë‹¤</h2>
            <p style="font-size:0.95rem; color:#b8b8ff;">ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="overlay-buttons" style="margin-top:20px; gap:20px;">
                <button class="btn" id="mercyBtn">ìë¹„</button>
                <button class="btn btn-outline" id="attackBtn">ê³µê²©</button>
            </div>
        </div>
        <div id="bossUpgradeOverlay" class="overlay hidden" style="z-index:22;">
            <h2>ğŸ† ë³´ìŠ¤ ì²˜ì¹˜! ëŠ¥ë ¥ ì„ íƒ</h2>
            <p style="font-size:0.9rem; color:#b8b8ff;">í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
            <div class="overlay-buttons" style="flex-direction:column; gap:8px; margin-top:12px;">
                <button class="btn btn-outline boss-upgrade-btn" onclick="applyBossUpgrade('ballSize')">ê³µ í¬ê¸° +13%</button>
                <button class="btn btn-outline boss-upgrade-btn" onclick="applyBossUpgrade('paddleSpeed')">íŒ ì†ë„ +12%</button>
                <button class="btn btn-outline boss-upgrade-btn" onclick="applyBossUpgrade('explode')">ë²½ëŒ íƒ€ê²© ì‹œ 10% í­ë°œ</button>
                <button class="btn btn-outline boss-upgrade-btn" onclick="applyBossUpgrade('extraLife')">ìƒëª… +1</button>
                <button class="btn btn-outline boss-upgrade-btn" onclick="applyBossUpgrade('bulletDuration')">ì´ì•Œ ì§€ì† +5ì´ˆ</button>
            </div>
        </div>
        
        <div id="stageMsgOverlay" class="overlay hidden" style="background: rgba(0,0,0,0.7);">
            <h2 id="stageMsgText"></h2>
        </div>
        
        <!-- ë¶€í™œ ì—°ì¶œ: ëŒ€ì‚¬ â†’ í•˜ì–€ í™”ë©´ â†’ ë¶€í™œ -->
        <div id="reviveOverlay" class="overlay hidden" style="z-index:24; background: rgba(0,0,0,0.9); transition: background 1.5s ease;">
            <p id="reviveOverlayText" style="font-size: 1.5rem; color: #fff; text-align: center; max-width: 90%; transition: opacity 0.8s ease;"></p>
        </div>
        
        <div id="stage6WhiteFadeOverlay" class="overlay hidden" style="z-index:26; pointer-events: none;"></div>
        
        <div id="passwordPromptModal" class="overlay hidden" style="z-index:25;">
            <h2 id="passwordPromptTitle">ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</h2>
            <p id="passwordPromptDesc" style="margin:10px 0; color:#b8b8ff;"></p>
            <div class="input-with-toggle">
                <input type="password" id="passwordPromptInput" placeholder="ë¹„ë°€ë²ˆí˜¸" maxlength="30" class="account-input" style="margin:10px 0;">
                <button type="button" class="btn-toggle-pw" id="togglePasswordPrompt" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
            </div>
            <div class="overlay-buttons" style="margin-top:15px;">
                <button class="btn" id="passwordPromptConfirmBtn">í™•ì¸</button>
                <button class="btn btn-small btn-outline" id="passwordPromptCancelBtn">ì·¨ì†Œ</button>
            </div>
        </div>
        
        <div id="editAccountModal" class="overlay hidden" style="z-index:25;">
            <h2>ê³„ì • ì •ë³´ ìˆ˜ì •</h2>
            <p id="editAccountNameDisplay" style="margin:8px 0; color:#b8b8ff;"></p>
            <input type="text" id="editProfile" placeholder="í”„ë¡œí•„ ì´ë¦„ (ìˆœìœ„ì— í‘œì‹œë¨)" maxlength="15" class="account-input" style="margin:8px 0; width:280px;">
            <div class="profile-draw-section">
                <p>í”„ë¡œí•„ ê·¸ë¦¼</p>
                <div class="profile-canvas-wrap">
                    <canvas id="editProfileCanvas" width="64" height="64" style="width:96px;height:96px;"></canvas>
                    <div style="display:flex; flex-direction:column; gap:6px;">
                        <div style="display:flex; align-items:center; gap:8px; font-size:0.85rem; color:#b8b8ff;">
                            <span>êµµê¸°</span>
                            <input type="range" id="editProfileBrushSize" min="1" max="12" value="3" style="width:70px;">
                            <span id="editProfileBrushSizeVal">3</span>
                        </div>
                        <div style="display:flex; gap:4px; flex-wrap:wrap;">
                            <button type="button" class="profile-color-btn active" data-color="#000000" title="ê²€ì •"></button>
                            <button type="button" class="profile-color-btn" data-color="#ffffff" title="í°ìƒ‰" style="border:1px solid #666;"></button>
                            <button type="button" class="profile-color-btn" data-color="#ff0000" title="ë¹¨ê°•"></button>
                            <button type="button" class="profile-color-btn" data-color="#00ff00" title="ì´ˆë¡"></button>
                            <button type="button" class="profile-color-btn" data-color="#0000ff" title="íŒŒë‘"></button>
                            <button type="button" class="profile-color-btn" data-color="#ffff00" title="ë…¸ë‘"></button>
                            <button type="button" class="profile-color-btn" data-color="#ff00ff" title="ë¶„í™"></button>
                        </div>
                        <button type="button" class="btn btn-small btn-outline" id="editProfileClearBtn">ì§€ìš°ê¸°</button>
                    </div>
                </div>
            </div>
            <div class="input-with-toggle">
                <input type="password" id="editCurrentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸" maxlength="30" class="account-input" style="margin:8px 0;">
                <button type="button" class="btn-toggle-pw" id="toggleEditCurrentPassword" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
            </div>
            <div class="input-with-toggle">
                <input type="password" id="editNewPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (ë³€ê²½ ì‹œì—ë§Œ ì…ë ¥)" maxlength="30" class="account-input" style="margin:8px 0;">
                <button type="button" class="btn-toggle-pw" id="toggleEditNewPassword" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
            </div>
            <div>
                <div class="input-with-toggle">
                    <input type="password" id="editNewPasswordConfirm" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸" maxlength="30" class="account-input" style="margin:8px 0;">
                    <button type="button" class="btn-toggle-pw" id="toggleEditNewPasswordConfirm" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
                </div>
                <p id="editPasswordMatchMsg" class="password-match-msg" style="display:none;"></p>
            </div>
            <input type="text" id="editQuestion" placeholder="ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ì§ˆë¬¸" maxlength="50" class="account-input" style="margin:8px 0; width:280px;">
            <input type="text" id="editHint" placeholder="íŒíŠ¸" maxlength="50" class="account-input" style="margin:8px 0; width:280px;">
            <input type="text" id="editAnswer" placeholder="ì§ˆë¬¸ì— ëŒ€í•œ ë‹µ" maxlength="30" class="account-input" style="margin:8px 0;">
            <div class="overlay-buttons" style="margin-top:15px;">
                <button class="btn" id="editAccountSubmitBtn">ì €ì¥</button>
                <button class="btn btn-small btn-outline" id="editAccountCancelBtn">ì·¨ì†Œ</button>
            </div>
        </div>
        
        <div id="findPasswordModal" class="overlay hidden" style="z-index:25;">
            <h2>ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</h2>
            <input type="text" id="findPasswordAccountSelect" class="account-input" placeholder="ê³„ì • ì•„ì´ë”” ì…ë ¥" maxlength="20" autocomplete="off" style="width:220px; margin:10px 0;">
            <p id="findPasswordQuestion" style="margin:10px 0; color:#b8b8ff; display:none;"></p>
            <p id="findPasswordHint" style="margin:5px 0; color:#888; font-size:0.9rem; display:none;"></p>
            <input type="text" id="findPasswordAnswer" placeholder="ì§ˆë¬¸ì— ëŒ€í•œ ë‹µ ì…ë ¥" maxlength="30" class="account-input" style="margin:10px 0; display:none;">
            <p id="findPasswordResult" style="margin:15px 0; color:#ffd700; font-weight:bold; display:none;"></p>
            <div class="overlay-buttons" style="margin-top:15px;">
                <button type="button" class="btn" id="findPasswordSubmitBtn" onclick="typeof handleFindPassword==='function'&&handleFindPassword()">í™•ì¸</button>
                <button type="button" class="btn btn-small btn-outline" id="findPasswordCancelBtn" onclick="document.getElementById('findPasswordModal')?.classList.add('hidden')">ë‹«ê¸°</button>
            </div>
        </div>
        
        <div id="optionsPanel" class="options-panel hidden">
            <h2>âš™ï¸ ì˜µì…˜</h2>
            <div class="option-row">
                <label>ë‚œì´ë„</label>
                <select id="difficulty">
                    <option value="easy" selected>Easy (ê³µì†ë„ 3)</option>
                    <option value="medium">Medium (ê³µì†ë„ 5)</option>
                    <option value="hard">Hard (ê³µì†ë„ 7)</option>
                </select>
            </div>
            <div class="option-row">
                <label>íŒ ì†ë„</label>
                <input type="range" id="paddleSpeed" min="5" max="25" value="12">
                <span class="option-value" id="paddleSpeedVal">12</span>
            </div>
            <div class="option-row">
                <label>ë¸”ëŸ­ ìˆ˜</label>
                <select id="blockCount">
                    <option value="small">ì ìŒ (5Ã—8)</option>
                    <option value="medium" selected>ë³´í†µ (6Ã—10)</option>
                    <option value="large">ë§ìŒ (8Ã—12)</option>
                </select>
            </div>
            <div class="option-row">
                <label>í™”ë©´ í¬ê¸°</label>
                <select id="screenSize">
                    <option value="mobile">ëª¨ë°”ì¼ ê°€ë¡œ</option>
                    <option value="small">ì‘ìŒ (640Ã—480)</option>
                    <option value="medium" selected>ë³´í†µ (800Ã—600)</option>
                    <option value="large">í¼ (960Ã—720)</option>
                </select>
            </div>
            <div class="option-row">
                <label>ì–¸ì–´</label>
                <select id="language">
                    <option value="ko" selected>í•œêµ­ì–´</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="shop-section">
                <h3>ğŸ… ë°œì „ê³¼ì œ</h3>
                <p style="font-size:0.9rem; color:#b8b8ff;">ë‹¬ì„±í•œ ë°œì „ê³¼ì œë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
                <div id="achievementsList" style="display:flex; flex-direction:column; gap:6px; margin-top:8px;"></div>
            </div>
            <div class="option-row" style="flex-direction:column; align-items:stretch;">
                <details style="cursor:pointer;">
                    <summary style="font-weight:bold; padding:8px 0;">ğŸ“‹ ì—…ë°ì´íŠ¸ ë‚´ì—­</summary>
                    <div id="updateLogContent" style="max-height:200px; overflow-y:auto; font-size:0.85rem; color:#b8b8ff; line-height:1.5; padding:10px; background:rgba(0,0,0,0.3); border-radius:8px; margin-top:6px; white-space:pre-wrap;">[ìµœì‹  ì—…ë°ì´íŠ¸]
â€¢ ë³´ìŠ¤ ì²´ë ¥ ì¡°ì •: 1~6ìŠ¤í…Œì´ì§€ (20,30,40,90,200,1000)
â€¢ ê³µ ë°ë¯¸ì§€: ë³´ìŠ¤ì—ê²Œ 10 (ìŠ¤í…Œì´ì§€6: 90)
â€¢ ë³´ìŠ¤ íƒ€ê²© ì‹œ ë¹¨ê°„ìƒ‰ ë°ë¯¸ì§€ ìˆ«ì í‘œì‹œ (0.4ì´ˆ)
â€¢ ë³´ìŠ¤ ë°©ì–´ë§‰: ìŠ¤í…Œì´ì§€4~6 (13/9/5ì´ˆ ê°„ê²©)
â€¢ ê²ŒìŠ¤íŠ¸ ëª¨ë“œ, íŠœí† ë¦¬ì–¼ ì¶”ê°€</div>
                </details>
            </div>
            <div class="shop-section" id="forgeSection">
                <h3>ğŸ”¨ ëŒ€ì¥ê°„</h3>
                <p style="font-size:0.9rem; color:#fff;">ğŸª™ ì½”ì¸: <span id="forgeCoinVal" class="coinVal">0</span></p>
                <div id="forgeGrid" style="display:flex; flex-direction:column; gap:8px; margin-top:8px; color:#fff;"></div>
            </div>
            <div class="shop-section equipment-shop">
                <h3>âš”ï¸ ì¥ë¹„ ìƒì </h3>
                <p style="font-size:0.9rem; color:#fff;">ğŸª™ ì½”ì¸: <span id="equipmentCoinVal" class="coinVal">0</span></p>
                <div id="equipmentShopGrid" style="display:flex; flex-direction:column; gap:8px; margin-top:8px; color:#fff;"></div>
            </div>
            <div class="shop-section">
                <h3>ğŸ›’ ê¾¸ë¯¸ê¸° ìƒì </h3>
                <div style="margin-bottom:12px;">
                    <span style="font-size:0.9rem; color:#b8b8ff;">íŒ ìŠ¤í‚¨</span>
                    <div class="shop-grid" id="paddleSkinGrid"></div>
                </div>
                <div>
                    <span style="font-size:0.9rem; color:#b8b8ff;">ê³µ ìŠ¤í‚¨</span>
                    <div class="shop-grid" id="ballSkinGrid"></div>
                </div>
            </div>
            <div class="shop-section">
                <h3>ğŸ® ë¯¸ë‹ˆê²Œì„</h3>
                <div style="display:flex; flex-direction:column; gap:8px; margin-top:8px;">
                    <button type="button" class="btn btn-outline" id="minigameTetrisBtn">1. í…ŒíŠ¸ë¦¬ìŠ¤</button>
                    <button type="button" class="btn btn-outline" id="minigameTouchTycoonBtn">2. í„°ì¹˜ íƒ€ì´ì¿¤ (ê³µ í´ë¦­ ì‹œ ì½”ì¸ +1)</button>
                </div>
            </div>
            <div class="option-row">
                <button type="button" class="btn btn-outline" id="creatorModeBtn">ğŸ”§ ë§Œë“¤ê¸° ëª¨ë“œ</button>
            </div>
            <div class="options-footer">
                <button type="button" class="btn" id="optionsCloseBtn" onclick="typeof closeOptions==='function'&&closeOptions()">ë‹«ê¸°</button>
                <button type="button" id="storageAdminBtn" title="ì˜¨ë¼ì¸ ì €ì¥ì†Œ ê´€ë¦¬"></button>
            </div>
        </div>
    </div>

    <!-- ì˜¨ë¼ì¸ ì €ì¥ì†Œ ê´€ë¦¬ ëª¨ë‹¬ -->
    <div id="storageAdminModal" class="overlay hidden" style="z-index:9999; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.95); pointer-events:auto;">
        <h2>ì˜¨ë¼ì¸ ì €ì¥ì†Œ ê´€ë¦¬</h2>
        <div class="overlay-buttons" style="margin-top:15px; flex-direction:column; gap:12px;">
            <button type="button" class="btn btn-outline" id="storageAdminResetAllBtn">ì „ì²´ ë°ì´í„° ì´ˆê¸°í™”</button>
            <a class="btn btn-outline" id="storageAdminConsoleLink" href="https://console.firebase.google.com/project/breakbrock-young/firestore" target="_blank" rel="noopener">Firebase Console ì—´ê¸°</a>
            <button type="button" class="btn btn-small btn-outline" id="storageAdminCloseBtn">ë‹«ê¸°</button>
        </div>
    </div>

    <!-- ê³„ì • ëª¨ë‹¬: body ì§ê³„ ìì‹ìœ¼ë¡œ ë¶„ë¦¬ (í´ë¦­/í‘œì‹œ ë¬¸ì œ ë°©ì§€) -->
    <div id="createAccountModal" class="overlay hidden" style="z-index:9999; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.95); pointer-events:auto;">
        <h2>ê³„ì • ìƒˆë¡œ ë§Œë“¤ê¸°</h2>
        <input type="text" id="newAccountName" placeholder="ê³„ì • ì•„ì´ë””" maxlength="20" class="account-input" style="margin:8px 0;">
        <input type="text" id="newProfile" placeholder="í”„ë¡œí•„ ì´ë¦„ (ìˆœìœ„ì— í‘œì‹œë¨)" maxlength="15" class="account-input" style="margin:8px 0; width:280px;">
        <div class="profile-draw-section">
            <p>í”„ë¡œí•„ ê·¸ë¦¼ ê·¸ë¦¬ê¸° (ìˆœìœ„ì— í‘œì‹œ)</p>
            <div class="profile-canvas-wrap">
                <canvas id="newProfileCanvas" width="64" height="64" style="width:96px;height:96px;"></canvas>
                <div style="display:flex; flex-direction:column; gap:6px;">
                    <div style="display:flex; align-items:center; gap:8px; font-size:0.85rem; color:#b8b8ff;">
                        <span>êµµê¸°</span>
                        <input type="range" id="newProfileBrushSize" min="1" max="12" value="3" style="width:70px;">
                        <span id="newProfileBrushSizeVal">3</span>
                    </div>
                    <div style="display:flex; gap:4px; flex-wrap:wrap;">
                        <button type="button" class="profile-color-btn active" data-color="#000000" title="ê²€ì •"></button>
                        <button type="button" class="profile-color-btn" data-color="#ffffff" title="í°ìƒ‰" style="border:1px solid #666;"></button>
                        <button type="button" class="profile-color-btn" data-color="#ff0000" title="ë¹¨ê°•"></button>
                        <button type="button" class="profile-color-btn" data-color="#00ff00" title="ì´ˆë¡"></button>
                        <button type="button" class="profile-color-btn" data-color="#0000ff" title="íŒŒë‘"></button>
                        <button type="button" class="profile-color-btn" data-color="#ffff00" title="ë…¸ë‘"></button>
                        <button type="button" class="profile-color-btn" data-color="#ff00ff" title="ë¶„í™"></button>
                    </div>
                    <button type="button" class="btn btn-small btn-outline" id="newProfileClearBtn">ì§€ìš°ê¸°</button>
                </div>
            </div>
        </div>
        <div class="input-with-toggle">
            <input type="password" id="newPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" maxlength="30" class="account-input">
            <button type="button" class="btn-toggle-pw" id="toggleNewPassword" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
        </div>
        <div>
            <div class="input-with-toggle">
                <input type="password" id="newPasswordConfirm" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" maxlength="30" class="account-input">
                <button type="button" class="btn-toggle-pw" id="toggleNewPasswordConfirm" title="ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°">ğŸ‘</button>
            </div>
            <p id="passwordMatchMsg" class="password-match-msg" style="display:none;"></p>
        </div>
        <input type="text" id="newQuestion" placeholder="ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ì§ˆë¬¸ (ì˜ˆ: ì–´ë¦´ì  ë³„ëª…ì€?)" maxlength="50" class="account-input" style="margin:8px 0; width:280px;">
        <input type="text" id="newHint" placeholder="íŒíŠ¸ (ì˜ˆ: ì´ˆë“±í•™êµ ë•Œ ë¶ˆë ¸ë˜ ì´ë¦„)" maxlength="50" class="account-input" style="margin:8px 0; width:280px;">
        <input type="text" id="newAnswer" placeholder="ì§ˆë¬¸ì— ëŒ€í•œ ë‹µ" maxlength="30" class="account-input" style="margin:8px 0;">
        <div class="overlay-buttons" style="margin-top:15px;">
            <button type="button" class="btn" id="createAccountSubmitBtn" onclick="typeof handleCreateAccount==='function'&&handleCreateAccount()">ìƒì„±</button>
            <button type="button" class="btn btn-small btn-outline" id="createAccountCancelBtn" onclick="typeof hideCreateAccountModal==='function'&&hideCreateAccountModal()">ì·¨ì†Œ</button>
        </div>
    </div>

    <!-- ë¯¸ë‹ˆê²Œì„: í…ŒíŠ¸ë¦¬ìŠ¤ -->
    <div id="minigameTetrisOverlay" class="overlay hidden" style="z-index:9998;">
        <h2>ğŸ® í…ŒíŠ¸ë¦¬ìŠ¤</h2>
        <div style="display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap; justify-content:center;">
            <canvas id="tetrisCanvas" width="200" height="400" style="background:#111; border:2px solid #667eea; border-radius:4px;"></canvas>
            <div style="text-align:left; color:#b8b8ff;">
                <p><strong>ì ìˆ˜:</strong> <span id="tetrisScore">0</span></p>
                <p><strong>ë‹¤ìŒ ë¸”ë¡:</strong></p>
                <canvas id="tetrisNextCanvas" width="80" height="80" style="background:#1a1a2e; border:1px solid #444; border-radius:4px; margin-top:4px;"></canvas>
                <p style="margin-top:12px; font-size:0.9rem;">â†â†’ ì´ë™, â†‘ íšŒì „<br>â†“ ë¹ ë¥´ê²Œ ë‚´ë¦¬ê¸°<br>ìŠ¤í˜ì´ìŠ¤: ì¦‰ì‹œ ì°©ì§€</p>
            </div>
        </div>
        <button type="button" class="btn" id="tetrisCloseBtn" style="margin-top:16px;">ë‹«ê¸°</button>
    </div>

    <!-- ë¯¸ë‹ˆê²Œì„: í„°ì¹˜ íƒ€ì´ì¿¤ -->
    <div id="minigameTouchTycoonOverlay" class="overlay hidden" style="z-index:9998;">
        <h2>ğŸ® í„°ì¹˜ íƒ€ì´ì¿¤</h2>
        <p>ê³µì„ í´ë¦­í•˜ë©´ ì½”ì¸ +1!</p>
        <div style="display:flex; gap:12px; align-items:center; margin:12px 0;">
            <span>ğŸª™ ì½”ì¸: <span id="touchTycoonCoins">0</span></span>
        </div>
        <canvas id="touchTycoonCanvas" width="400" height="400" style="background:linear-gradient(180deg,#1a1a2e 0%,#16213e 100%); border:2px solid #667eea; border-radius:8px; cursor:pointer;"></canvas>
        <button type="button" class="btn" id="touchTycoonCloseBtn" style="margin-top:16px;">ë‹«ê¸°</button>
    </div>

    <script type="module" src="firebase.js"></script>
</body>
</html>
